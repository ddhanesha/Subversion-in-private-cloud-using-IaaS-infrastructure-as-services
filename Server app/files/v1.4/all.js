var wb=wb||{getAjaxUrl:function(){return"http://www.webbudds.com/core/ajax/"},getHostUrl:function(){return"http://www.webbudds.com/"},checkResponse:function(e){e.error||"true"==e.error?(console.log(e.msg),$("#overlay").fadeOut(),alert("There is an error occured while posting your content")):document.location.reload()},count:function(e){var o=0;return null==e?0:($.each(e,function(){o++}),o)},createNoteShareDialog:function(){var e='<div class="form-group"><label for="shareNoteContent" class="col-sm-2 control-label">Note</label><div class="col-sm-10"><textarea class="form-control" id="shareNoteContent" placeholder="Enter note here" required></textarea></div></div>'+this.creditsContainer();this.createShareDialogBox("Note",e,"wb.shareNote()")},createPhotoShareDialog:function(){var e='<div class="form-group"><label for="sharePhotoDescription" class="col-sm-2 control-label">Description</label><div class="col-sm-10"><textarea class="form-control" id="sharePhotoDescription" placeholder="Enter note here" required style="height:150px;"></textarea></div></div><br /><br /><div class="form-group"><label for="sharePhotoFile" class="col-sm-2 control-label">File</label><div class="col-sm-10"><input type="file" id="sharePhotoFile"></div></div><br><br><div class="form-group"><label for="uploadProgress" class="col-sm-2 control-label"></label><div class="col-sm-10"><progress id="uploadProgress" class="form-control"></progress></div></div>'+this.creditsContainer();this.createShareDialogBox("Photo",e,"wb.sharePhoto()")},createYouTubeShareDialog:function(){var e='<div class="form-group"><label for="shareYouTubeContent" class="col-sm-2 control-label">Select</label><div class="col-sm-10"><select class="form-control" id="shareYouTubeContent"></select><small class="text-danger" id="youtubeAlert"></small></div></div>'+this.creditsContainer();this.createShareDialogBox("YouTube",e,"wb.shareYouTube()"),$("#title-form-group").css("display","none"),$("#shareTitle").val("webbudds"),gapi.auth.init(function(){}),$("#globalShareBtn").css("display","none");var o,t="412205397599-3sbdh56oipff01kh5f954t6sm4men8cd.apps.googleusercontent.com",a=["https://www.googleapis.com/auth/youtube"];gapi.auth.authorize({client_id:t,scope:a,immediate:!1},function(e){e&&!e.error?gapi.client.load("youtube","v3",function(){var e=gapi.client.youtube.channels.list({mine:!0,part:"contentDetails"});e.execute(function(e){o=e.result.items[0].contentDetails.relatedPlaylists.uploads;var t={playlistId:o,part:"snippet",maxResults:50},a=gapi.client.youtube.playlistItems.list(t);a.execute(function(e){var o=e.result.items;o?($("#youtubeAlert").html(""),$.each(o,function(e,o){var t=o.snippet.title,a=o.snippet.resourceId.videoId;$("#shareYouTubeContent").append('<option value="'+a+'">'+t+"</option>"),$("#globalShareBtn").css("display","block")})):($("#globalShareBtn").css("display","none"),$("#youtubeAlert").html("Sorry you have no uploaded videos"),alert("Sorry you have no uploaded videos"))})})}):($("#globalShareBtn").css("display","none"),$("#youtubeAlert").html("Error while connecting with YouTube. Please try again"))})},createSoundCloudShareDialog:function(){var e='<div class="form-group"><label for="shareSoundCloudContent" class="col-sm-2 control-label">Select</label><div class="col-sm-10"><select class="form-control" id="shareSoundCloudContent"></select><small class="text-danger" id="soundcloudAlert"></small></div></div>'+this.creditsContainer();this.createShareDialogBox("SoundCloud",e,"wb.shareSoundCloud()"),$("#title-form-group").css("display","none"),$("#globalShareBtn").css("display","none"),$("#shareTitle").val("webbudds"),SC.connect(function(){SC.get("/me",function(e){SC.get("/users/"+e.id+"/tracks",function(e){for(var o=0;o<e.length;o++)$("#globalShareBtn").css("display","block"),$("#shareSoundCloudContent").append('<option value="'+e[o].id+'" data-desc="'+e[o].description+'">'+e[o].title+"</option>");0==e.length&&($("#globalShareBtn").css("display","none"),$("#soundcloudAlert").html("Sorry you have no uploaded tracks on SoundCloud"),alert("Sorry you have no uploaded tracks on SoundCloud"))})})})},createLinkShareDialog:function(){var e='<div class="form-group"><label for="shareLinkContent" class="col-sm-2 control-label">URL</label><div class="col-sm-10"><input type="text" class="form-control" id="shareLinkContent" placeholder="Paste URL here" required></div></div>'+this.creditsContainer();this.createShareDialogBox("Link",e,"wb.shareLink()"),$("#title-form-group").css("display","none"),$("#shareTitle").val("webbudds")},createFacebookShareDialog:function(){var e='<div class="form-group"><label for="shareFacebookContent" class="col-sm-2 control-label">URL</label><div class="col-sm-10"><input type="text" class="form-control" id="shareFacebookContent" placeholder="https://www.facebook.com/xxxxxxxxxx" required><br /><small>I acknowledge that, this page is belongs to me and I agrre to Terms and conditions.</small></div></div>'+this.creditsContainer();this.createShareDialogBox("Facebook Page",e,"wb.shareFacebook()"),$("#title-form-group").css("display","none"),$("#shareTitle").val("webbudds")},createGoogleShareDialog:function(){var e='<div class="form-group"><label for="shareGoogleContent" class="col-sm-2 control-label">URL</label><div class="col-sm-10"><input type="text" class="form-control" id="shareGoogleContent" placeholder="Paste Google page URL here" required></div></div>'+this.creditsContainer();this.createShareDialogBox("Google Page",e,"wb.shareGoogle()"),$("#title-form-group").css("display","none"),$("#shareTitle").val("webbudds")},createTwitterShareDialog:function(){var e='<div class="form-group"><label for="shareTwitterContent" class="col-sm-2 control-label">Screen name</label><div class="col-sm-10"><input type="text" class="form-control" id="shareTwitterContent" placeholder="Enter Twitter username here like: DhruvP1110" required></div></div>'+this.creditsContainer();this.createShareDialogBox("Twitter Page",e,"wb.shareTwitter()")},createInstagramShareDialog:function(){var e='<iframe frameborder="0" src="'+this.getHostUrl()+'instagram/connect.php" style="width:100%; height:364px;"></iframe>';this.createShareDialogBox("Instagram Photo",e,"void()"),$("#title-form-group,#category-form-group,#shareModal br").css("display","none"),$(".modal-body").remove("br"),$("#globalShareBtn").css("display","none")},createWordpressShareDialog:function(){var e='<div class="form-group"><label for="shareWordPressContent" class="col-sm-2 control-label">Domain</label><div class="col-sm-10"><input type="text" class="form-control" id="shareWordPressContent" placeholder="Enter domain name including HTTP or HTTPS" required></div></div>';this.createShareDialogBox("WordPress Site",e,"wb.shareWordPress()"),$("#title-form-group").css("display","none"),$("#shareTitle").val("webbudds")},createSitemapShareDialog:function(){var e="This feature currently under construction";this.createShareDialogBox("SItemap",e,"wb.void()"),$("#title-form-group,#category-form-group").css("display","none"),$("#globalShareBtn").css("display","none")},createBulkLinkShareDialog:function(){var e="This feature currently under construction";this.createShareDialogBox("Bulk Linking",e,"void()"),$("#title-form-group,#category-form-group").css("display","none"),$("#globalShareBtn").css("display","none")},creditsContainer:function(){if($("#acc_credits").val()>=10){var e='<div class="form-group"><div class="col-sm-offset-2 col-sm-10"><div class="checkbox"><label><input type="checkbox" id="isBoost"><span class="ripple"></span><span class="check"></span> Boost my share for 2 days by spending 10 points</label></div></div></div>';return e}return""},createShareDialogBox:function(e,o,t){var a='<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true" onclick="$(\'#shareModal\').fadeOut();">Ã—</button><h4 class="modal-title">'+e+'</h4></div><div class="modal-body"><div class="form-group" id="title-form-group"><label for="shareTitle" class="col-sm-2 control-label">Title</label><div class="col-sm-10"><input type="text" class="form-control" id="shareTitle" placeholder="Enter title here" required></div></div><br><br><div class="form-group" id="category-form-group"><label for="shareCategoryContent" class="col-sm-2 control-label">Category</label><div class="col-sm-10"><select class="form-control" id="shareCategoryContent"></select></div></div><br /><br />',s='</div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal" onclick="$(\'#shareModal\').fadeOut();">Close</button><button type="button" class="btn btn-primary" onclick="'+t+';" id="globalShareBtn">Share</button></div></div></div></div>';$("#shareModal").html(a+o+s).fadeIn(),$.post(this.getAjaxUrl()+"get_cat.php",{},function(e){var o;if(e.data)for(var t=0;t<wb.count(e.data);t++)o+='<option value="'+e.data[t].cat_id+'">'+e.data[t].title+"</option>";else console.log("Categories not available");$("#shareCategoryContent").html(o)},"json")},isShareBoost:function(){return $("#isBoost").length&&$("#isBoost").is(":checked")?"yes":"no"},showOverlay:function(){$(".overlay").fadeIn()},shareNote:function(){var e=$("#shareTitle").val(),o=this.isShareBoost(),t=$("#shareCategoryContent").val(),a=$("#shareNoteContent").val();a=a.replace(/(?:\r\n|\r|\n)/g,"<br />"),wb.shareValidate()&&(this.showOverlay(),$.post(this.getAjaxUrl()+"share_note.php",{title:e,note:a,boost:o,cat:t},function(e){wb.checkResponse(e)},"json"))},sharePhoto:function(){var e=$("#shareTitle").val(),o=this.isShareBoost(),t=$("#shareCategoryContent").val(),a=$("#sharePhotoDescription").val();if(a=a.replace(/(?:\r\n|\r|\n)/g,"<br />"),wb.shareValidate()){this.showOverlay();var s=new FormData,r=document.getElementById("sharePhotoFile");s.append("file",r.files[0]),s.append("title",e),s.append("boost",o),s.append("cat",t),s.append("photoDesc",a),$.ajax({url:this.getAjaxUrl()+"share_photo.php",type:"POST",xhr:function(){var e=$.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",wb.progressHandling,!1),e},beforeSend:function(){},success:function(){document.location.reload()},error:function(){$("#overlay").fadeOut(),alert("There is an error occured while posting your content")},data:s,cache:!1,contentType:!1,processData:!1})}},shareYouTube:function(){var e=$("#shareYouTubeContent option:selected").text(),o=this.isShareBoost(),t=$("#shareCategoryContent").val(),a=$("#shareYouTubeContent option:selected").val();wb.shareValidate()&&(this.showOverlay(),$.post(this.getAjaxUrl()+"share_youtube.php",{title:e,video_id:a,boost:o,cat:t},function(e){wb.checkResponse(e)},"json"))},shareSoundCloud:function(){var e=$("#shareSoundCloudContent option:selected").text(),o=this.isShareBoost(),t=$("#shareCategoryContent").val(),a=$("#shareSoundCloudContent option:selected").val(),s=$("#shareSoundCloudContent option:selected").attr("data-desc");$.post(wb.getAjaxUrl()+"share_soundcloud.php",{title:e,track_id:a,description:s,boost:o,cat:t},function(e){wb.checkResponse(e)},"json")},shareLink:function(){var e=this.isShareBoost(),o=$("#shareCategoryContent").val(),t=$("#shareLinkContent").val();wb.shareValidate()&&(this.showOverlay(),$.post(this.getAjaxUrl()+"share_link.php",{url:t,boost:e,cat:o},function(e){wb.checkResponse(e)},"json"))},shareFacebook:function(){var e=this.isShareBoost(),o=$("#shareCategoryContent").val(),t=$("#shareFacebookContent").val();if(wb.shareValidate()){this.showOverlay();var a=t.substring(t.lastIndexOf("/"));FB.getLoginStatus(function(s){FB.api("/v2.1"+a+"?access_token="+s.authResponse.accessToken,function(a){if(a&&!a.error){var s=a.id,r=a.about||"",l=a.category||"",n=a.cover.source||"",i=a.name,c=a.website||"",d=a.likes,h=a.username||"";$.post(wb.getAjaxUrl()+"share_facebook.php",{url:t,boost:e,cat:o,fb_id:s,fb_about:r,fb_cat:l,fb_cover:n,fb_name:i,fb_website:c,fb_likes:d,fb_username:h},function(e){wb.checkResponse(e)},"json"),console.log(a)}else console.log(a),wb.checkResponse(a)})})}},shareGoogle:function(){var e=this.isShareBoost(),o=$("#shareCategoryContent").val(),t=$("#shareGoogleContent").val();wb.shareValidate()&&(this.showOverlay(),$.post(this.getAjaxUrl()+"share_google.php",{url:t,boost:e,cat:o},function(e){wb.checkResponse(e)},"json"))},shareTwitter:function(){var e=$("#shareTitle").val(),o=this.isShareBoost(),t=$("#shareCategoryContent").val(),a=$("#shareTwitterContent").val();wb.shareValidate()&&(this.showOverlay(),$.post(this.getAjaxUrl()+"share_twitter.php",{title:e,twitter:a,boost:o,cat:t},function(e){wb.checkResponse(e)},"json"))},shareWordPress:function(){var e=$("#shareCategoryContent").val(),o=$("#shareWordPressContent").val();wb.shareValidate()&&(this.showOverlay(),$.post(this.getAjaxUrl()+"share_wordpress.php",{domain:o,cat:e},function(e){wb.checkResponse(e)},"json"))},shareValidate:function(){var e=!0;return $("#shareModal input,#shareModal textarea,#shareModal select").each(function(){""==$(this).val()&&"block"==$(this).css("display")&&(e=!1,console.log($(this).attr("id")))}),e||alert("Please fill all necessary fields"),e},progressHandling:function(e){e.lengthComputable&&$("#uploadProgress").css("display","block").attr({value:e.loaded,max:e.total})},soundCloudParser:function(e,o,t,a){SC.get("/resolve",{url:e},function(s){var r=s.id;wb.shareValidate()&&(wb.showOverlay(),$.post(wb.getAjaxUrl()+"share_soundcloud.php",{title:t,track_id:r,track_url:e,boost:a,cat:o},function(e){wb.checkResponse(e)},"json"))})},youTubeParser:function(e){if(-1!=e.indexOf("?")){for(var o=decodeURI(e).split("?")[1],t=o.split("&"),a=0,s=t.length;s>a;a++)if(0===t[a].indexOf("v="))return t[a].replace("v=","")}else if(-1!=e.indexOf("youtu.be"))return decodeURI(e).split("youtu.be/")[1];return null}};$(document).ready(function(){$(".share_card").each(function(){var e=$(this).attr("data-id");e%10==0?$(this).css("background","rgb(229, 215, 242)"):e%10==1?$(this).css("background","rgb(255, 255, 181)"):e%10==2?$(this).css("background","rgb(236, 236, 255)"):e%10==3?$(this).css("background","rgb(221, 255, 168)"):e%10==4?$(this).css("background","rgb(255, 223, 223)"):e%10==5?$(this).css("background","rgb(129, 255, 213)"):e%10==6?$(this).css("background","rgb(223, 246, 255)"):e%10==7?$(this).css("background","rgb(250, 231, 206)"):e%10==8?$(this).css("background","rgb(92, 250, 255)"):e%10==9&&$(this).css("background","rgb(247, 207, 237)")})});